name: Auto Commit

on:
  schedule:
    # Runs every minute
    - cron: "* * * * *"
  workflow_dispatch: # Allows manual trigger

jobs:
  auto-commit:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Configure Git
        run: |
          git config --global user.name "andrewidianto12"
          git config --global user.email "penghijauan@gmail.com"

      - name: Make changes
        run: |
          # Add your custom changes here
          # Example: Update a timestamp file
          echo "Last updated: $(date)" > LAST_UPDATE.txt

      - name: Commit and push changes
        run: |
          HOUR=$(date +'%H')
          case $HOUR in
            00) EMOJI="ğŸŒ™" ;; # Midnight
            01) EMOJI="ğŸŒŒ" ;; # 1 AM
            02) EMOJI="ğŸ’¤" ;; # 2 AM
            03) EMOJI="ğŸ¦‰" ;; # 3 AM
            04) EMOJI="ğŸŒƒ" ;; # 4 AM
            05) EMOJI="ğŸŒ„" ;; # 5 AM
            06) EMOJI="ğŸŒ…" ;; # 6 AM - Sunrise
            07) EMOJI="â˜•" ;; # 7 AM - Coffee time
            08) EMOJI="ğŸŒ" ;; # 8 AM
            09) EMOJI="ğŸ“Š" ;; # 9 AM - Work starts
            10) EMOJI="ğŸ’¼" ;; # 10 AM
            11) EMOJI="ğŸ“ˆ" ;; # 11 AM
            12) EMOJI="ğŸ±" ;; # 12 PM - Lunch
            13) EMOJI="ğŸŒ¤ï¸" ;; # 1 PM
            14) EMOJI="ğŸ’»" ;; # 2 PM
            15) EMOJI="â˜•" ;; # 3 PM - Afternoon coffee
            16) EMOJI="ğŸ“" ;; # 4 PM
            17) EMOJI="ğŸƒ" ;; # 5 PM - Going home
            18) EMOJI="ğŸŒ†" ;; # 6 PM - Evening
            19) EMOJI="ğŸ½ï¸" ;; # 7 PM - Dinner
            20) EMOJI="ğŸ“º" ;; # 8 PM
            21) EMOJI="ğŸŒ™" ;; # 9 PM
            22) EMOJI="ğŸŒœ" ;; # 10 PM
            23) EMOJI="ğŸ˜´" ;; # 11 PM
            *) EMOJI="ğŸ¤–" ;;
          esac
          git add .
          git diff --quiet && git diff --staged --quiet || (git commit -m "$EMOJI Auto commit - $(date +'%Y-%m-%d %H:%M:%S')" && git push)
